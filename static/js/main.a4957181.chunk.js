(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{23:function(e,t,a){e.exports=a(55)},28:function(e,t,a){},46:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),c=a.n(s),i=(a(28),a(3)),o=a(6),l=a(7),u=a(17),h=a(18),m=a(2),d=a(22),S=a(21),p=a(19),v=a.n(p),b=(a(46),a(20)),E=a.n(b),f=(a(48),"https://hn.algolia.com/api/v1"),y={width:"53%"},g={width:"13%"},N={paddingLeft:"160px"},T={width:"5%"},O=a(4),j={NONE:function(e){return e},TITLE:function(e){return Object(O.sortBy)(e,"title")},AUTHOR:function(e){return Object(O.sortBy)(e,"author")},COMMENTS:function(e){return Object(O.sortBy)(e,"num_comments").reverse()},POINTS:function(e){return Object(O.sortBy)(e,"points").reverse()}},C=[{value:"NONE",label:"None"},{value:"TITLE",label:"Title"},{value:"AUTHOR",label:"Author"},{value:"COMMENTS",label:"Comments"},{value:"POINTS",label:"Points"}],w=(a(51),function(e){var t=e.sortCriteria;return r.a.createElement("div",{className:"table-head"},r.a.createElement("span",{style:y,className:"Title"==t&&"sortCriteria"},"Title"),r.a.createElement("span",{style:g,className:"Author"==t&&"sortCriteria"},"Author"),r.a.createElement("span",{style:g,className:"Comments"==t&&"sortCriteria"},"Comments"),r.a.createElement("span",{style:g,className:"Points"==t&&"sortCriteria"},"Points"),r.a.createElement("span",{style:T},"Archive"))}),k=(a(52),function(e){var t=e.list,a=e.searchTerm,n=e.onDismiss,s=e.sortKey;return r.a.createElement("div",{className:"table"},j[s](t).filter(function(e){return function(t){if(t.title)return t.title.toLowerCase().includes(e.toLowerCase())}}(a)).map((function(e){return r.a.createElement("div",{key:e.objectID,className:"table-row"},r.a.createElement("span",{className:"row-title",style:y},r.a.createElement("a",{href:e.url},e.title)),r.a.createElement("span",{style:g},e.author,"  "),r.a.createElement("span",{style:T},e.num_comments),r.a.createElement("span",{style:N},e.points),r.a.createElement("span",{style:T},r.a.createElement("button",{className:"button-inline",onClick:function(){return n(e.objectID)},type:"button"},"Dismiss")))})))}),D=(a(53),function(e){var t=e.onSearch,a=e.onSubmit,n=e.children;return r.a.createElement("div",{className:"Search"},r.a.createElement("form",{onSubmit:a},r.a.createElement("div",{class:"container input-field"},r.a.createElement("input",{type:"text",onChange:t,placeholder:"   Search a title"}),r.a.createElement("button",{type:"submit",className:"button-search"},n))))}),K=(a(54),function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"spinner"},r.a.createElement("div",{className:"rect1"}),r.a.createElement("div",{className:"rect2"}),r.a.createElement("div",{className:"rect3"}),r.a.createElement("div",{className:"rect4"}),r.a.createElement("div",{className:"rect5"})),r.a.createElement("div",{className:"interactions"},r.a.createElement("h5",null,"Loading...")))}),M=function(e){Object(d.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e))._isMounted=!1,n.state={result:null,searchTerm:"react",pageSearch:"",searchKey:"",error:null,isLoading:!1,sortKey:"NONE",sortCriteria:""},n.needsToSearchTopStories=n.needsToSearchTopStories.bind(Object(m.a)(n)),n.setSearchTopStories=n.setSearchTopStories.bind(Object(m.a)(n)),n.fetchTopStories=n.fetchTopStories.bind(Object(m.a)(n)),n.onSearchSubmit=n.onSearchSubmit.bind(Object(m.a)(n)),n.onPageSearch=n.onPageSearch.bind(Object(m.a)(n)),n.onDismiss=n.onDismiss.bind(Object(m.a)(n)),n.onSearch=n.onSearch.bind(Object(m.a)(n)),n.onSort=n.onSort.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"onSort",value:function(e){this.setState({sortKey:e.value,sortCriteria:e.label})}},{key:"needsToSearchTopStories",value:function(e){return!this.state.result[e]}},{key:"fetchTopStories",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.setState({isLoading:!0}),n||this.setState({sortKey:"NONE",sortCriteria:""}),v()("".concat(f).concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(a,"&").concat("hitsPerPage=").concat("100")).then((function(e){return t._isMounted&&t.setSearchTopStories(e.data)})).catch((function(e){return t._isMounted&&t.setState({error:e})}))}},{key:"onSearchSubmit",value:function(e){var t=this.state.searchTerm;this.setState({searchKey:t}),this.needsToSearchTopStories(t)&&this.fetchTopStories(t),e.preventDefault()}},{key:"setSearchTopStories",value:function(e){var t=e.hits,a=e.page,n=this.state,r=n.searchKey,s=n.result,c=s&&s[r]?s[r].hits:[],u=[].concat(Object(l.a)(c),Object(l.a)(t));this.setState({result:Object(o.a)({},s,Object(i.a)({},r,{hits:u,page:a})),isLoading:!1})}},{key:"onDismiss",value:function(e){var t=this.state,a=t.searchKey,n=t.result,r=n[a],s=r.hits,c=r.page,l=s.filter((function(t){return t.objectID!==e}));this.setState({result:Object(o.a)({},n,Object(i.a)({},a,{hits:l,page:c}))})}},{key:"onSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"onPageSearch",value:function(e){this.setState({pageSearch:e.target.value})}},{key:"componentDidMount",value:function(){var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchTopStories(e),this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageSearch,n=t.result,s=t.searchKey,c=t.error,i=t.isLoading,o=t.sortKey,l=t.sortCriteria,u=n&&n[s]&&n[s].page||0,h=n&&n[s]&&n[s].hits||[];return c?r.a.createElement("div",{className:"Page"},r.a.createElement("div",{className:"interactions"},r.a.createElement("p",null,"Something went wrong..."))):r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"interactions"},r.a.createElement("h1",{className:"fadein"},"Hacker News Clone"),r.a.createElement("h1",null,n&&n.page),r.a.createElement(D,{onSearch:this.onSearch,onSubmit:this.onSearchSubmit},"Search")),r.a.createElement(w,{sortCriteria:l}),r.a.createElement("div",{className:"in-page"},r.a.createElement("input",{type:"text",style:{width:"200px"},placeholder:"Search in page",onChange:this.onPageSearch}),r.a.createElement("div",{className:"dropdown"},r.a.createElement(E.a,{options:C,onChange:this.onSort,value:o,placeholder:"Sort"}))),n&&r.a.createElement(k,{list:h,searchTerm:a,onDismiss:this.onDismiss,sortKey:o}),i?r.a.createElement(K,null):r.a.createElement("div",{className:"interactions"},r.a.createElement("button",{onClick:function(){return e.fetchTopStories(s,u+1,!0)}},"More")))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.a4957181.chunk.js.map