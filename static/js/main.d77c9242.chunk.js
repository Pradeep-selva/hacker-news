(this["webpackJsonphacker-news"]=this["webpackJsonphacker-news"]||[]).push([[0],{11:function(e,t,a){e.exports=a(18)},16:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(6),s=a.n(r),i=(a(16),a(2)),o=a(3),l=a(4),h=a(7),u=a(8),m=a(1),p=a(10),S=a(9),d=(a(17),"https://hn.algolia.com/api/v1"),b={width:"55%"},f={width:"20%"},v={width:"5%"},y=function(e){Object(p.a)(a,e);var t=Object(S.a)(a);function a(e){var n;return Object(h.a)(this,a),(n=t.call(this,e)).state={result:null,searchTerm:"react",pageSearch:"",searchKey:""},n.needsToSearchTopStories=n.needsToSearchTopStories.bind(Object(m.a)(n)),n.setSearchTopStories=n.setSearchTopStories.bind(Object(m.a)(n)),n.fetchTopStories=n.fetchTopStories.bind(Object(m.a)(n)),n.onSearchSubmit=n.onSearchSubmit.bind(Object(m.a)(n)),n.onPageSearch=n.onPageSearch.bind(Object(m.a)(n)),n.onDismiss=n.onDismiss.bind(Object(m.a)(n)),n.onSearch=n.onSearch.bind(Object(m.a)(n)),n}return Object(u.a)(a,[{key:"needsToSearchTopStories",value:function(e){return!this.state.result[e]}},{key:"fetchTopStories",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;fetch("".concat(d).concat("/search","?").concat("query=").concat(e,"&").concat("page=").concat(a,"&").concat("hitsPerPage=").concat("100")).then((function(e){return e.json()})).then((function(e){return t.setSearchTopStories(e)})).catch((function(e){return e}))}},{key:"onSearchSubmit",value:function(e){var t=this.state.searchTerm;this.setState({searchKey:t}),this.needsToSearchTopStories(t)&&this.fetchTopStories(t),e.preventDefault()}},{key:"setSearchTopStories",value:function(e){var t=e.hits,a=e.page,n=this.state,c=n.searchKey,r=n.result,s=r&&r[c]?r[c].hits:[],h=[].concat(Object(l.a)(s),Object(l.a)(t));this.setState({result:Object(o.a)({},r,Object(i.a)({},c,{hits:h,page:a}))})}},{key:"onDismiss",value:function(e){var t=this.state,a=t.searchKey,n=t.result,c=n[a],r=c.hits,s=c.page,l=r.filter((function(t){return t.objectID!==e}));this.setState({result:Object(o.a)({},n,Object(i.a)({},a,{hits:l,page:s}))})}},{key:"onSearch",value:function(e){this.setState({searchTerm:e.target.value})}},{key:"onPageSearch",value:function(e){this.setState({pageSearch:e.target.value})}},{key:"componentDidMount",value:function(){var e=this.state.searchTerm;this.setState({searchKey:e}),this.fetchTopStories(e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.pageSearch,n=t.result,r=t.searchKey,s=n&&n[r]&&n[r].page||0,i=n&&n[r]&&n[r].hits||[];return c.a.createElement("div",{className:"page"},c.a.createElement("div",{className:"interactions"},c.a.createElement("h1",{className:"fadein"},"Hacker News Clone"),c.a.createElement("h1",null,n&&n.page),c.a.createElement(E,{onSearch:this.onSearch,onSubmit:this.onSearchSubmit},"Search")),c.a.createElement("div",{className:"table-head"},c.a.createElement("span",{style:{width:"53%"}},"Article"),c.a.createElement("span",{style:{width:"13%"}},"Author"),c.a.createElement("span",{style:{width:"15%"}},"Comments"),c.a.createElement("span",{style:{width:"15%"}},"Points")),c.a.createElement("div",{className:"in-page"},c.a.createElement("input",{type:"text",style:{width:"200px"},placeholder:"Search in page",onChange:this.onPageSearch})),n?c.a.createElement(g,{list:i,searchTerm:a,onDismiss:this.onDismiss}):c.a.createElement("h1",null,"Loading..."),n&&c.a.createElement("div",{className:"interactions"},c.a.createElement("button",{onClick:function(){return e.fetchTopStories(r,s+1)}},"More")))}}]),a}(n.Component),E=function(e){var t=e.onSearch,a=e.onSubmit,n=e.children;return c.a.createElement("div",{className:"Search"},c.a.createElement("form",{onSubmit:a},c.a.createElement("div",{class:"container input-field"},c.a.createElement("input",{type:"text",onChange:t,placeholder:"   Search a title"}),c.a.createElement("button",{type:"submit",className:"button-search"},n))))},g=function(e){var t=e.list,a=e.searchTerm,n=e.onDismiss;return c.a.createElement("div",{className:"table"},t.filter(function(e){return function(t){if(t.title)return t.title.toLowerCase().includes(e.toLowerCase())}}(a)).map((function(e){return c.a.createElement("div",{key:e.objectID,className:"table-row"},c.a.createElement("span",{className:"row-title",style:b},c.a.createElement("a",{href:e.url},e.title)),c.a.createElement("span",{style:f},e.author,"  "),c.a.createElement("span",{style:v},e.num_comments),c.a.createElement("span",{style:v},e.points),c.a.createElement("span",{style:v},c.a.createElement("button",{className:"button-inline",onClick:function(){return n(e.objectID)},type:"button"},"Dismiss")))})))},T=y;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[11,1,2]]]);
//# sourceMappingURL=main.d77c9242.chunk.js.map